{
    "class_name": "WorkFlowGraph",
    "goal": "Create a daily trading decision workflow for A-share stocks.\n\n## Workflow Overview:\nA multi-step workflow for daily trading decisions with fixed capital, making trading decisions based on market data and current positions, with comprehensive analysis and detailed methodology.\n\n## Task Description:\n**Name:** daily_trading_decision\n**Description:** A comprehensive trading decision system that analyzes market data and generates daily trading operations with extensive analysis, detailed methodology, and in-depth decision-making rationale.\n\n## Input:\n- **goal** (string): Contains stock code, available funds, current positions, data folder path, output file path, investment strategy (aggressive/neutral/conservative), and optional past report path\n\n## Output:\n- **comprehensive_report** (string): A comprehensive daily trading report with extensive analysis, detailed professional methodology, and in-depth decision-making rationale\n\n## Subtasks:\n1. **information_collection**: List all files in the data folder, identify available data sources, and extract the investment strategy/personality from the user's goal\n2. **background_analysis**: Analyze market environment, industry trends, news, and fundamental factors\n3. **price_analysis**: Analyze stock price data, technical indicators, and price patterns\n4. **report_generation**: Compile comprehensive trading report\n5. **analysis_writer**: Copy the trading report and add comprehensive professional analysis directly into it\n\n## Agent Requirements:\nEach agent must:\n1. Use tool to discover available files in the specified data folder\n2. Use tool to read relevant files based on file names and paths\n3. Extract and present ALL data without omissions or truncations\n4. Generate comprehensive analysis based on actual data from files\n5. Create detailed reports with four sections:\n\n   **Section 1: TRADING OPERATIONS**\n   - **DECISION**: Buy/Sell/Hold with specific reasoning\n   - **POSITION ACTION**: Open new positions / Close existing positions / Add to positions / Reduce positions\n   - **QUANTITY**: Exact number of shares to trade\n   - **PRICE TARGETS**: Entry price, take profit levels, stop loss levels\n   - **CAPITAL ALLOCATION**: How much of available funds to use\n   - **POSITION SIZING**: Risk management and position sizing rationale\n\n   **Section 2: COMPREHENSIVE ANALYSIS**\n   - Technical analysis (MA, RSI, MACD, support/resistance)\n   - Fundamental analysis (earnings, news, institutional recommendations)\n   - Market sentiment and trends\n   - Risk assessment with specific metrics\n   - Complete data presentation from all files\n   - Detailed thinking process and methodology\n   - **MULTI-DIMENSIONAL ANALYSIS**: Multi-perspective synthesis combining fundamental, technical, and market environment analysis\n   - **STRATEGY ADAPTATION**: Analysis tailored to investment strategy (aggressive/neutral/conservative)\n   - **CONFLICT RESOLUTION**: Resolution of conflicts between different analysis perspectives\n   - **STRATEGY OPTIMIZATION**: Strategy-specific recommendations and adjustments\n\n   **Section 3: PAST PERFORMANCE REVIEW** (if past report provided)\n   - Review of previous trading decisions\n   - Performance analysis and lessons learned\n   - Feedback on past recommendations\n   - Strategy adjustments based on historical performance\n\n   **Section 4: STRATEGY-SPECIFIC RECOMMENDATIONS**\n   - Analysis and recommendations tailored to the investment strategy type\n   - Risk tolerance adjustments based on strategy\n   - Position sizing recommendations aligned with strategy\n   - Time horizon considerations for the strategy type\n   - Technical vs fundamental analysis weights matching the strategy\n\n4. Present all data in structured tables and clear sections\n5. Return the complete report content as output\n6. Base ALL analysis and recommendations on actual data read from files - never use fake or estimated data\n7. If no files are found in the folder, report this clearly and do not make up data\n8. Pass file discovery results to subsequent tasks for efficient data loading\n9. Each task should focus on its specific responsibility while using data from previous tasks\n10. **MANDATORY**: Every agent that needs data MUST use the \"read\" tool to read actual files\n11. **MANDATORY**: Never assume file contents - always read them using the \"read\" tool\n12. **MANDATORY**: If a file exists, read it; if it doesn't exist, report that clearly\n\n## Critical Instructions:\n- **information_collection agent**: Use tool to discover all files in the data folder, extract investment personality, and pass file list to next task\n- **background_analysis agent**: Use tool to read relevant files and analyze market environment, industry trends, news, and fundamental factors\n- **price_analysis agent**: Use tool to read relevant files and analyze stock price data, technical indicators, and price patterns\n- **report_generation agent**: Compile all analysis into comprehensive report\n- **analysis_writer agent**: Copy the trading report and add comprehensive professional analysis directly into it\n- Base all decisions on actual data from files\n- Include specific numbers for all recommendations (prices, quantities, percentages)\n- Present complete data tables without truncation\n- Return the entire report content without summarization\n- Provide professional explanations for all trading decisions\n- Consider current positions and available capital in decision making\n- Do not save files - return the complete report content as output\n- **CRITICAL**: Each agent MUST use tool to read actual files - NEVER make up data\n- **CRITICAL**: Present ALL data from all files - do not omit, truncate, or summarize any data\n- **CRITICAL**: NEVER use fake, estimated, or placeholder data - ONLY use real data from files\n- **CRITICAL**: If past report path is provided, read that file and use it for performance review\n- **CRITICAL**: Show complete data tables with every row and every column from all files\n- **CRITICAL**: Do not make up data if files are empty - report the actual file contents\n- **CRITICAL**: The tool is MANDATORY for accessing any file data\n- **CRITICAL**: If you cannot read a file, report the error but do not invent data\n- **PERSONALITY-BASED ANALYSIS**: The LLM should embody the investment personality/strategy and write the report from that specific perspective, not just recommend strategies\n- **STRATEGY EMBODIMENT**: For aggressive strategy, write as an aggressive investor; for conservative, write as a conservative investor; for neutral, write as a balanced investor\n- **OUTPUT FORMAT**: The final comprehensive_report should be a complete markdown report without any special extraction markers or formatting - just the raw report content",
    "nodes": [
        {
            "class_name": "WorkFlowNode",
            "name": "information_collection",
            "description": "Discover, classify, and filter files in the data folder while extracting the investment strategy/personality from the user's goal to provide categorized file lists for different analysis tasks.",
            "inputs": [
                {
                    "class_name": "Parameter",
                    "name": "goal",
                    "type": "string",
                    "description": "The user's goal in textual format, outlining the required data and analysis.",
                    "required": true
                }
            ],
            "outputs": [
                {
                    "class_name": "Parameter",
                    "name": "background_files",
                    "type": "array",
                    "description": "An array of file paths relevant for background analysis (industry data, news, expert opinions, economic factors).",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "price_files",
                    "type": "array",
                    "description": "An array of file paths relevant for past price analysis (stock price data, technical indicators, price charts).",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "investment_strategy",
                    "type": "string",
                    "description": "The extracted investment strategy (aggressive or neutral or conservative) from the user's goal.",
                    "required": true
                }
            ],
            "reason": "This sub-task is crucial to efficiently categorize and filter relevant data files for each specific analysis task while understanding the user's investment strategy/personality, improving workflow performance and accuracy.",
            "agents": [
                {
                    "name": "information_collection_agent",
                    "description": "This agent discovers all files in the data folder, intelligently categorizes them based on their content and relevance to different analysis tasks, and extracts the investment strategy/personality from the user's goal.",
                    "inputs": [
                        {
                            "name": "goal",
                            "type": "string",
                            "description": "The user's goal in textual format, outlining the required data and analysis.",
                            "required": true
                        }
                    ],
                    "outputs": [
                        {
                            "name": "background_files",
                            "type": "array",
                            "description": "An array of file paths relevant for background analysis (industry data, news, expert opinions, economic factors).",
                            "required": true
                        },
                        {
                            "name": "price_files",
                            "type": "array",
                            "description": "An array of file paths relevant for past price analysis (stock price data, technical indicators, price charts).",
                            "required": true
                        },
                        {
                            "name": "investment_strategy",
                            "type": "string",
                            "description": "The extracted investment strategy (aggressive/neutral/conservative) from the user's goal.",
                            "required": true
                        }
                    ],
                    "prompt": "### Objective\nDiscover, classify, and filter files in the data folder and reports folder while extracting the investment strategy/personality from the user's goal to provide categorized file lists for different analysis tasks.\n\n### Instructions\n1. Parse the user's goal: <input>{goal}</input> to understand the data requirements, stock being analyzed, and investment strategy/personality preferences.\n2. **CRITICAL**: Extract the data folder path and reports folder path from the goal.\n3. **CRITICAL**: Extract the investment strategy (aggressive, neutral, or conservative) from the goal. If not specified, default to 'neutral'.\n4. **CRITICAL**: Analyze the user's goal to extract detailed investment personality characteristics:\n   - **Risk Tolerance**: Analyze language for risk preferences (high/moderate/low risk tolerance)\n   - **Time Horizon**: Identify short-term vs long-term investment preferences\n   - **Analysis Style**: Determine technical vs fundamental analysis preferences\n   - **Behavioral Characteristics**: Identify decision-making style and trading frequency preferences\n   - **Investment Goals**: Extract growth, income, or value investment objectives\n   - **Decision Approach**: Identify systematic, intuitive, or data-driven preferences\n5. **CRITICAL**: Utilize tool to execute command line operations that list all files in BOTH the data folder AND the reports folder.\n6. **CRITICAL**: Analyze each file and determine if it's relevant for any of the three analysis tasks. Filter out files that are:\n   - System files (.DS_Store, .git, .gitignore, etc.)\n   - Temporary files (.tmp, .temp, .bak, etc.)\n   - Log files (.log)\n   - Configuration files (.config, .ini, .yaml, .yml)\n   - Executable files (.exe, .sh, .py, .js, etc.)\n   - Archive files (.zip, .tar, .gz, .rar)\n   - Files with no clear relevance to stock analysis\n   - Empty files or files with no meaningful content\n\n7. **CRITICAL**: Categorize the remaining relevant files into two groups:\n\n   **BACKGROUND FILES** (for background analysis):\n   - Files containing industry data, sector analysis, market news\n   - Expert opinions, analyst reports, research documents\n   - Economic indicators, macro trends, policy updates\n   - Market indices, benchmark data, sentiment analysis\n   - Company news, earnings reports, regulatory information\n   - Files with keywords: news, report, analysis, industry, sector, economic, policy, expert, analyst, sentiment, index, benchmark\n   - File extensions: .txt, .md, .pdf, .doc, .docx, .csv (if containing text data)\n   - **EXCLUDE**: Files with keywords: price, chart, technical, indicator, volume, pattern, trend, ma, rsi, macd, support, resistance\n   - **LOCATION**: Only from data folder\n\n   **PRICE FILES** (for past price analysis):\n   - Files containing stock price data, historical prices\n   - Technical indicators, price charts, trading data\n   - Volume data, price patterns, support/resistance levels\n   - Files with keywords: price, chart, technical, indicator, volume, pattern, trend, ma, rsi, macd, support, resistance\n   - File extensions: .csv, .json, .xlsx, .xls (if containing numerical data)\n   - Chart files: .png, .jpg, .svg (if containing price charts)\n   - **EXCLUDE**: Files with keywords: news, report, analysis, industry, sector, economic, policy, expert, analyst, sentiment, index, benchmark\n   - **LOCATION**: Only from data folder\n\n8. **IMPORTANT**: If a file could belong to multiple categories, assign it to the most appropriate one based on its primary content.\n9. **IMPORTANT**: Consider file naming patterns, extensions, and directory structure for classification.\n10. **IMPORTANT**: Only include files that are clearly relevant to the specific analysis task.\n11. **CRITICAL**: For performance files, prioritize files from the reports folder over data folder.\n12. Return two categorized file lists and the investment strategy with personality analysis to facilitate efficient analysis by downstream tasks.\n\n### Personality Analysis Guidelines\n\n**Risk Tolerance Indicators:**\n- **High Risk**: aggressive, bold, growth-focused, momentum, short-term, high returns\n- **Moderate Risk**: balanced, steady, moderate returns, medium-term, risk-adjusted\n- **Low Risk**: conservative, safe, capital preservation, long-term, stable\n\n**Time Horizon Indicators:**\n- **Short-term**: day trading, swing trading, momentum, quick profits, frequent trades\n- **Medium-term**: position trading, trend following, 1-6 months, regular monitoring\n- **Long-term**: value investing, buy-and-hold, dividends, years, patient\n\n**Analysis Style Indicators:**\n- **Technical Focus**: charts, patterns, indicators, price action, momentum, technical analysis\n- **Fundamental Focus**: earnings, valuation, fundamentals, company analysis, growth potential\n- **Balanced**: both technical and fundamental, comprehensive analysis\n\n**Behavioral Indicators:**\n- **Active**: frequent trading, market timing, dynamic, responsive to market changes\n- **Strategic**: planned positions, systematic approach, methodical, disciplined\n- **Patient**: long-term holds, value-based, low turnover, buy-and-hold\n\n### Output Format\nYour final output should ALWAYS in the following format:\n\n## Thought\nBriefly explain the reasoning process for categorizing and filtering the discovered files and extracting the investment strategy and personality characteristics.\n\n## background_files\nAn array of file paths relevant for background analysis (industry data, news, expert opinions, economic factors).\n\n## price_files\nAn array of file paths relevant for past price analysis (stock price data, technical indicators, price charts).\n\n## investment_strategy\nThe extracted investment strategy (aggressive, neutral, or conservative) from the user's goal with detailed personality analysis including risk tolerance, time horizon, analysis style, and behavioral characteristics.",
                    "tool_names": [
                        "CMDToolkit"
                    ]
                }
            ],
            "status": "pending"
        },
        {
            "class_name": "WorkFlowNode",
            "name": "background_analysis",
            "description": "Collect and analyze background information that affects stock prices, including industry data, news, expert opinions, market indices, and economic factors.",
            "inputs": [
                {
                    "class_name": "Parameter",
                    "name": "goal",
                    "type": "string",
                    "description": "The user's goal in textual format.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "background_files",
                    "type": "array",
                    "description": "The array of file paths relevant for background analysis (industry data, news, expert opinions, economic factors).",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "investment_strategy",
                    "type": "string",
                    "description": "The investment strategy (aggressive/neutral/conservative) to guide the analysis approach.",
                    "required": true
                }
            ],
            "outputs": [
                {
                    "class_name": "Parameter",
                    "name": "background_info",
                    "type": "object",
                    "description": "A comprehensive collection of background information about the market environment that affects stock prices.",
                    "required": true
                }
            ],
            "reason": "This step is essential for understanding the broader market environment and external factors that influence stock prices, providing context for trading decisions.",
            "agents": [
                {
                    "name": "background_analysis_agent",
                    "description": "This agent collects and analyzes background information including industry data, news, expert opinions, and market indices that affect stock prices.",
                    "inputs": [
                        {
                            "name": "goal",
                            "type": "string",
                            "description": "The user's goal in textual format.",
                            "required": true
                        },
                        {
                            "name": "background_files",
                            "type": "array",
                            "description": "The array of file paths relevant for background analysis (industry data, news, expert opinions, economic factors).",
                            "required": true
                        },
                        {
                            "name": "investment_strategy",
                            "type": "string",
                            "description": "The investment strategy (aggressive/neutral/conservative) to guide the analysis approach.",
                            "required": true
                        }
                    ],
                    "outputs": [
                        {
                            "name": "background_info",
                            "type": "object",
                            "description": "A comprehensive collection of background information about the market environment that affects stock prices.",
                            "required": true
                        }
                    ],
                    "prompt": "### Objective\nCollect comprehensive background information affecting the target stock's price, focusing on market environment, industry trends, news, and fundamental factors.\n\n<input>{investment_strategy}</input>\n\n### Instructions\n1. **CRITICAL**: You MUST use the StorageToolkit to read ALL files in <input>{background_files}</input> - this is MANDATORY\n2. **CRITICAL**: Use ONLY real data from files - if data is unavailable or not found in files, write '-' (dash) - NEVER make up or generate fake data\n3. **CRITICAL**: If a file cannot be read or doesn't exist, report the error and use '-' for that data\n4. **FOCUS**: Target the specific stock mentioned in <input>{goal}</input>\n5. **COMPREHENSIVE**: Provide 5+ data entries for each category when available from actual files\n6. **CALCULATE**: Perform actual calculations based on real data, don't just describe methods\n7. **SORTING**: Sort all data from the latest to the earliest (newest first) - this is critical for trading decisions\n8. **NO FAKE DATA**: Under no circumstances should you invent, estimate, or generate data that is not present in the actual files\n\n### Required Data Categories\n\n**Market Environment Data:**\n- Macro economic indicators (CPI指数, GDP增长率, interest rates, 市场指数)\n- Industry fund flows and sector performance (including 行业名称, 资金流入, 资金流出, 净流入, 排名)\n- Market sentiment indicators (volatility, fear index)\n- Economic policy changes and regulatory updates\n\n**Fundamental Analysis Data:**\n- Company news with URLs, impact levels, and interpretations\n- Institutional ratings and target prices (including 机构名称, 评级, 目标价, 评级日期, 分析师)\n- Industry position analysis (市场份额, 竞争优势, 增长潜力, market share, competitive advantages)\n- Earnings reports and financial metrics\n\n**Risk Assessment Data:**\n- Market risk factors and levels (including 市场风险, 行业风险, 个股风险, 应对措施)\n- Industry-specific risks\n- Company-specific risks\n- Risk mitigation strategies\n\n### Output Format\nYour final output should ALWAYS in the following format:\n\n## Thought\nBriefly explain the reasoning process for collecting and analyzing background information.\n\n## background_info\nA comprehensive object containing background information about:\n- Industry and sector trends\n- Market news and sentiment (with URLs when available)\n- Expert opinions and analyst views\n- Economic indicators and macro factors\n- Competitive landscape\n- Regulatory environment\n- Market indices and benchmarks\n- CPI指数, GDP增长率, 市场指数 data\n- 行业资金流向 (行业名称, 资金流入, 资金流出, 净流入, 排名)\n- 机构评级汇总 (机构名称, 评级, 目标价, 评级日期, 分析师)\n- 行业地位分析 (市场份额, 竞争优势, 增长潜力)\n- 风险因素 (市场风险, 行业风险, 个股风险, 应对措施)\n\nFor news items, include:\n- News title\n- Source\n- Publish time\n- Impact level (高/中/低)\n- Interpretation\n- URL (when available)\n\n**IMPORTANT**: Use '-' for any data that is not available in the actual files you read.",
                    "tool_names": [
                        "StorageToolkit"
                    ]
                }
            ],
            "status": "pending"
        },
        {
            "class_name": "WorkFlowNode",
            "name": "price_analysis",
            "description": "Analyze stock price data, technical indicators, and price patterns to provide technical analysis for trading decisions.",
            "inputs": [
                {
                    "class_name": "Parameter",
                    "name": "goal",
                    "type": "string",
                    "description": "The user's goal in textual format.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "price_files",
                    "type": "array",
                    "description": "The array of file paths relevant for price analysis (stock price data, technical indicators, price charts).",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "investment_strategy",
                    "type": "string",
                    "description": "The investment strategy (aggressive/neutral/conservative) to guide the analysis approach.",
                    "required": true
                }
            ],
            "outputs": [
                {
                    "class_name": "Parameter",
                    "name": "price_analysis",
                    "type": "object",
                    "description": "A comprehensive analysis of stock price data including technical indicators, patterns, and trading signals.",
                    "required": true
                }
            ],
            "reason": "This step is essential for analyzing historical price patterns, technical indicators, and generating trading signals based on price data.",
            "agents": [
                {
                    "name": "price_analysis_agent",
                    "description": "This agent analyzes stock price data, technical indicators, and price patterns to provide technical analysis for trading decisions.",
                    "inputs": [
                        {
                            "name": "goal",
                            "type": "string",
                            "description": "The user's goal in textual format.",
                            "required": true
                        },
                        {
                            "name": "price_files",
                            "type": "array",
                            "description": "The array of file paths relevant for price analysis (stock price data, technical indicators, price charts).",
                            "required": true
                        },
                        {
                            "name": "investment_strategy",
                            "type": "string",
                            "description": "The investment strategy (aggressive/neutral/conservative) to guide the analysis approach.",
                            "required": true
                        }
                    ],
                    "outputs": [
                        {
                            "name": "price_analysis",
                            "type": "object",
                            "description": "A comprehensive analysis of stock price data including technical indicators, patterns, and trading signals.",
                            "required": true
                        }
                    ],
                    "prompt": "### Objective\nAnalyze stock price data and calculate basic technical indicators for the target stock, providing comprehensive technical analysis for trading decisions.\n\n<input>{investment_strategy}</input>\n\n### Instructions\n1. **CRITICAL**: You MUST use the StorageToolkit to read ALL files in <input>{price_files}</input> - this is MANDATORY\n2. **CRITICAL**: Use ONLY real data from files - if data is unavailable or not found in files, mark as 'Not Given' - NEVER make up or generate fake data\n3. **CRITICAL**: If a file cannot be read or doesn't exist, report the error and use 'Not Given' for that data\n4. **FOCUS**: Target the specific stock mentioned in <input>{goal}</input>\n5. **COMPREHENSIVE**: Provide 5+ data entries for each category when available from actual files\n6. **CALCULATE**: Perform actual calculations for MA5 and basic price analysis based on real data\n7. **ANALYZE**: Generate trading signals and price targets based on technical data from actual files\n8. **SORTING**: Sort all data from the latest to the earliest (newest first) - this is critical for trading decisions\n9. **NO FAKE DATA**: Under no circumstances should you invent, estimate, or generate data that is not present in the actual files\n\n### Required Data Categories\n\n**Price Trend Analysis:**\n- Historical price data (OHLC) for multiple time periods\n- Price momentum and trend strength calculations\n- Volume analysis and price-volume relationships\n- Key price levels and breakout points\n\n**Technical Indicators (Calculate):**\n- Moving average (MA5) - simple 5-period average\n- Price change percentages and trends\n- Basic support and resistance levels\n- Volume patterns and analysis\n\n**Support/Resistance Analysis:**\n- Support levels with strength ratings\n- Resistance levels with strength ratings\n- Breakout probabilities and price targets\n- Risk-reward ratios based on technical levels\n\n**Trading Signals:**\n- Entry/exit points based on technical analysis\n- Stop loss and take profit levels\n- Position sizing recommendations\n- Risk assessment based on price volatility\n\n### Output Format\nYour final output should ALWAYS in the following format:\n\n## Thought\nBriefly explain the reasoning process for analyzing price data and technical indicators.\n\n## price_analysis\nA comprehensive object containing price analysis including:\n- Historical price trends and patterns\n- Technical indicators analysis (MA5, price changes, etc.)\n- Support and resistance levels\n- Volume analysis\n- Trading signals and recommendations\n- Risk assessment based on price data\n- All raw price data from files in structured format\n\n**IMPORTANT**: Use 'Not Given' for any data that is not available in the actual files you read.",
                    "tool_names": [
                        "StorageToolkit"
                    ]
                }
            ],
            "status": "pending"
        },
        {
            "class_name": "WorkFlowNode",
            "name": "report_generation",
            "description": "Compile all analyses including background analysis, past price analysis, and performance review into a comprehensive trading report.",
            "inputs": [
                {
                    "class_name": "Parameter",
                    "name": "goal",
                    "type": "string",
                    "description": "The user's goal in textual format.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "background_info",
                    "type": "object",
                    "description": "A comprehensive collection of background information about the market environment that affects stock prices.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "price_analysis",
                    "type": "object",
                    "description": "The comprehensive analysis of past stock price data including patterns, trends, and technical indicators.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "investment_strategy",
                    "type": "string",
                    "description": "The investment strategy (aggressive/neutral/conservative) to guide the report generation.",
                    "required": true
                }
            ],
            "outputs": [
                {
                    "class_name": "Parameter",
                    "name": "trading_report",
                    "type": "string",
                    "description": "A comprehensive daily trading report including analysis and recommendations.",
                    "required": true
                }
            ],
            "reason": "This final sub-task ensures that all findings, insights, and recommendations are organized into a structured and clear report for the user.",
            "agents": [
                {
                    "name": "report_generation_agent",
                    "description": "This agent compiles all analyses into a comprehensive trading report using a structured template format with detailed sections and data tables.",
                    "inputs": [
                        {
                            "name": "goal",
                            "type": "string",
                            "description": "The user's goal in textual format.",
                            "required": true
                        },
                        {
                            "name": "background_info",
                            "type": "object",
                            "description": "A comprehensive collection of background information about the market environment that affects stock prices.",
                            "required": true
                        },
                        {
                            "name": "price_analysis",
                            "type": "object",
                            "description": "The comprehensive analysis of past stock price data including patterns, trends, and technical indicators.",
                            "required": true
                        },
                        {
                            "name": "investment_strategy",
                            "type": "string",
                            "description": "The investment strategy (aggressive/neutral/conservative) to guide the report generation.",
                            "required": true
                        }
                    ],
                    "outputs": [
                        {
                            "name": "trading_report",
                            "type": "string",
                            "description": "A comprehensive daily trading report including analysis and recommendations.",
                            "required": true
                        }
                    ],
                    "prompt": "### Objective\nCompile all analyses into a comprehensive trading report using the exact template format with detailed sections and data tables, embodying the investment personality/strategy and writing from that specific perspective.\n\n<input>{investment_strategy}</input>\n\n### Instructions\n1. **MANDATORY**: Use ONLY real data from the two analysis inputs - if unavailable, use '-'\n2. **MANDATORY**: Follow the exact template structure below - do not modify any section\n3. **MANDATORY**: Fill ALL sections with actual data from ALL two analysis agents\n4. **VALIDATION**: Ensure all information is valid and correct - if uncertain, use '-'\n5. **COMPREHENSIVE**: Include ALL data tables and information from all two agents\n6. **PERSONALITY EMBODIMENT**: You MUST embody the investment personality/strategy and write the entire report from that specific perspective\n7. **MULTI-PERSPECTIVE SYNTHESIS**: Create a comprehensive analysis section that combines all perspectives from your embodied personality\n\n### Investment Personality Embodiment\n\n**AGGRESSIVE Investor Personality:**\n- Write as an aggressive, risk-taking investor who seeks high returns\n- Emphasize growth potential, momentum, and short-term opportunities\n- Focus on technical signals and market timing\n- Use confident, bold language and recommendations\n- Prioritize capital growth over capital preservation\n- Look for breakout opportunities and trend following\n- Be willing to take larger positions and higher risks\n\n**NEUTRAL Investor Personality:**\n- Write as a balanced, moderate investor who seeks steady returns\n- Balance fundamental and technical analysis equally\n- Use measured, analytical language\n- Focus on risk-adjusted returns\n- Maintain moderate position sizes and time horizons\n- Consider both growth and value opportunities\n- Take a pragmatic, data-driven approach\n\n**CONSERVATIVE Investor Personality:**\n- Write as a conservative, risk-averse investor who prioritizes capital preservation\n- Emphasize fundamental analysis, value, and stability\n- Focus on long-term value and dividend potential\n- Use cautious, thorough language\n- Prioritize capital preservation over aggressive growth\n- Look for stable, established companies\n- Take smaller positions and longer time horizons\n\n### Data Sources\n- **background_info**: <input>{background_info}</input> - Market environment, news, ratings, risk factors\n- **price_analysis**: <input>{price_analysis}</input> - Technical indicators, price trends, support/resistance\n- **goal**: <input>{goal}</input> - User's goal and context\n- **investment_strategy**: <input>{investment_strategy}</input> - Investment strategy type to embody\n\n### MANDATORY REPORT TEMPLATE\n\n# 每日交易决策报告\n\n**日期**: [YYYY年MM月DD日]  \n**股票代码**: [STOCK_CODE]  \n**股票名称**: [STOCK_NAME]  \n**可用资金**: [AMOUNT] RMB  \n**当前持仓**: [SHARES] 股，平均成本 [AVG_PRICE] RMB  \n**持仓类型**: [POSITION_TYPE]  \n**投资策略**: [AGGRESSIVE/NEUTRAL/CONSERVATIVE]  \n**报告生成时间**: [TIMESTAMP]\n\n## 一、交易操作决策\n\n### 1.1 核心决策\n| 决策类型 | 操作建议 | 执行理由 | 风险等级 |\n|----------|----------|----------|----------|\n| [买入/卖出/持有] | [具体操作] | [详细分析] | [高/中/低] |\n\n### 1.2 仓位管理\n| 当前仓位 | 目标仓位 | 调整数量 | 资金分配 |\n|----------|----------|----------|----------|\n| [当前股数] | [目标股数] | [±股数] | [金额] RMB |\n\n### 1.3 价格目标\n| 入场价格 | 止盈价格 | 止损价格 | 目标收益率 |\n|----------|----------|----------|------------|\n| [价格] | [价格] | [价格] | [百分比] |\n\n## 二、市场环境分析\n\n### 2.1 宏观经济指标\n| 指标名称 | 当前值 | 变化趋势 | 对股票影响 |\n|----------|--------|----------|------------|\n| CPI指数 | [数值] | [上升/下降] | [正面/负面] |\n| GDP增长率 | [数值] | [上升/下降] | [正面/负面] |\n| 市场指数 | [数值] | [上升/下降] | [正面/负面] |\n\n### 2.2 行业资金流向\n| 行业名称 | 资金流入 | 资金流出 | 净流入 | 排名 |\n|----------|----------|----------|--------|------|\n| [行业] | [金额] | [金额] | [金额] | [排名] |\n\n## 三、技术分析\n\n### 3.1 价格走势分析\n| 时间周期 | 开盘价 | 最高价 | 最低价 | 收盘价 | 涨跌幅 |\n|----------|--------|--------|--------|--------|--------|\n| [日期] | [价格] | [价格] | [价格] | [价格] | [百分比] |\n\n### 3.2 技术指标\n| 指标名称 | 当前值 | 信号 | 解读 |\n|----------|--------|------|------|\n| MA5 | [数值] | [买入/卖出] | [解读] |\n\n### 3.3 支撑阻力位\n| 类型 | 价格水平 | 强度 | 突破概率 |\n|------|----------|------|----------|\n| 支撑位 | [价格] | [强/中/弱] | [百分比] |\n| 阻力位 | [价格] | [强/中/弱] | [百分比] |\n\n## 四、基本面分析\n\n### 4.1 最新新闻动态\n| 新闻标题 | 来源 | 发布时间 | 影响程度 | 解读 | 链接 |\n|----------|------|----------|----------|------|\n| [标题] | [来源] | [时间] | [高/中/低] | [解读] |\n\n### 4.2 机构评级汇总\n| 机构名称 | 评级 | 目标价 | 评级日期 | 分析师 |\n|----------|------|--------|----------|--------|\n| [机构] | [评级] | [价格] | [日期] | [姓名] |\n\n### 4.3 行业地位分析\n- **市场份额**: [数据]\n- **竞争优势**: [分析]\n- **增长潜力**: [评估]\n\n## 五、综合多维度分析\n\n### 5.1 多视角综合分析\n| 分析维度 | 基本面分析 | 技术面分析 | 市场环境分析 | 综合评估 |\n|----------|------------|------------|--------------|----------|\n| 趋势判断 | [分析] | [分析] | [分析] | [综合] |\n| 风险评估 | [分析] | [分析] | [分析] | [综合] |\n| 机会识别 | [分析] | [分析] | [分析] | [综合] |\n| 策略匹配 | [分析] | [分析] | [分析] | [综合] |\n\n### 5.2 策略适配分析\n**投资策略**: [AGGRESSIVE/NEUTRAL/CONSERVATIVE]\n\n**策略特征分析**:\n- **风险偏好**: [根据策略类型分析]\n- **时间周期**: [根据策略类型分析]\n- **仓位管理**: [根据策略类型分析]\n- **技术权重**: [根据策略类型分析]\n- **基本面权重**: [根据策略类型分析]\n\n### 5.3 冲突解决与优先级\n| 分析冲突 | 冲突描述 | 策略权重 | 最终决策 | 理由 |\n|----------|----------|----------|----------|------|\n| [冲突类型] | [描述] | [策略权重] | [决策] | [理由] |\n\n### 5.4 策略优化建议\n**当前策略**: [AGGRESSIVE/NEUTRAL/CONSERVATIVE]\n\n**策略调整建议**:\n- **仓位调整**: [根据策略的具体建议]\n- **时间调整**: [根据策略的具体建议]\n- **风险控制**: [根据策略的具体建议]\n- **技术指标权重**: [根据策略的具体建议]\n- **基本面关注点**: [根据策略的具体建议]\n\n## 六、风险评估\n\n### 6.1 风险因素\n| 风险类型 | 风险等级 | 影响程度 | 应对措施 |\n|----------|----------|----------|----------|\n| 市场风险 | [高/中/低] | [描述] | [措施] |\n| 行业风险 | [高/中/低] | [描述] | [措施] |\n| 个股风险 | [高/中/低] | [描述] | [措施] |\n\n### 6.2 风险控制策略\n- **止损设置**: [具体价格]\n- **仓位控制**: [最大仓位比例]\n- **分散投资**: [建议]\n\n## 七、投资建议\n\n### 7.1 短期操作建议\n**建议**: [买入/卖出/持有]\n**理由**: [详细分析]\n**执行时间**: [具体时间]\n**预期收益**: [百分比]\n\n### 7.2 中长期策略\n**目标价格**: [价格]\n**持有周期**: [时间]\n**退出条件**: [具体条件]\n\n### 7.3 风险提示\n[重要风险提示和免责声明]\n\n---\n**报告生成时间**: [TIMESTAMP]  \n**数据来源**: [数据来源说明]  \n**免责声明**: [标准免责声明]\n\n### Output Format\nYour final output should ALWAYS in the following format:\n\n## Thought\nBriefly explain the reasoning process for compiling the trading report based on the gathered data and how you embodied the investment personality.\n\n## trading_report\nThe comprehensive daily trading report using the exact template format above with all sections filled with actual data from ALL two analysis agents, written from the perspective of the embodied investment personality (aggressive/neutral/conservative)."
                }
            ],
            "status": "pending"
        },
        {
            "class_name": "WorkFlowNode",
            "name": "analysis_writer",
            "description": "Copy the trading report and add comprehensive professional analysis directly into it, creating a single detailed report with both data display and detailed analysis.",
            "inputs": [
                {
                    "class_name": "Parameter",
                    "name": "trading_report",
                    "type": "string",
                    "description": "The comprehensive trading report generated by the report_generation agent.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "background_info",
                    "type": "object",
                    "description": "A comprehensive collection of background information about the market environment that affects stock prices.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "price_analysis",
                    "type": "object",
                    "description": "The comprehensive analysis of past stock price data including patterns, trends, and technical indicators.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "goal",
                    "type": "string",
                    "description": "The user's goal in textual format.",
                    "required": true
                },
                {
                    "class_name": "Parameter",
                    "name": "investment_strategy",
                    "type": "string",
                    "description": "The investment strategy (aggressive/neutral/conservative) to guide the analysis approach.",
                    "required": true
                }
            ],
            "outputs": [
                {
                    "class_name": "Parameter",
                    "name": "comprehensive_report",
                    "type": "string",
                    "description": "A comprehensive report that combines the trading report with detailed professional analysis, maintaining the original structure while adding extensive analysis sections.",
                    "required": true
                }
            ],
            "reason": "This step creates a single comprehensive report by copying the trading report and adding detailed professional analysis directly into it, ensuring the report is copied correctly and the analysis is long, detailed, and professional while maintaining the overall structure.",
            "agents": [
                {
                    "name": "analysis_writer_agent",
                    "description": "This agent copies the trading report and adds comprehensive professional analysis directly into it, creating a single detailed report with both data display and detailed analysis.",
                    "llm_config": {
                        "llm_type": "OpenAILLM",
                        "model": "gpt-4o",
                        "openai_key": "${OPENAI_API_KEY}",
                        "temperature": 0.7,
                        "max_tokens": 16000,
                        "stream": true,
                        "output_response": true
                    },
                    "inputs": [
                        {
                            "name": "trading_report",
                            "type": "string",
                            "description": "The comprehensive trading report generated by the report_generation agent.",
                            "required": true
                        },
                        {
                            "name": "background_info",
                            "type": "object",
                            "description": "A comprehensive collection of background information about the market environment that affects stock prices.",
                            "required": true
                        },
                        {
                            "name": "price_analysis",
                            "type": "object",
                            "description": "The comprehensive analysis of past stock price data including patterns, trends, and technical indicators.",
                            "required": true
                        },
                        {
                            "name": "goal",
                            "type": "string",
                            "description": "The user's goal in textual format.",
                            "required": true
                        },
                        {
                            "name": "investment_strategy",
                            "type": "string",
                            "description": "The investment strategy (aggressive/neutral/conservative) to guide the analysis approach.",
                            "required": true
                        }
                    ],
                    "outputs": [
                        {
                            "name": "comprehensive_report",
                            "type": "string",
                            "description": "A comprehensive report that combines the trading report with detailed professional analysis, maintaining the original structure while adding extensive analysis sections.",
                            "required": true
                        }
                    ],
                    "prompt": "### Objective\nCopy the trading report and add comprehensive professional analysis directly into it, creating a single detailed report that maintains the original structure while adding extensive analysis sections.\n\n### Instructions\n1. **COPY ACCURATELY**: Copy the entire trading report exactly as provided, ensuring no content is lost or modified\n2. **ADD ANALYSIS**: Insert comprehensive professional analysis sections after the existing content\n3. **MAINTAIN STRUCTURE**: Keep the original report structure intact while adding new analysis sections\n4. **DETAILED ANALYSIS**: Provide long, detailed, and professional analysis that explains the decision-making process\n5. **PROFESSIONAL TONE**: Write in a professional, analytical tone suitable for investment professionals\n6. **COMPREHENSIVE COVERAGE**: Cover all aspects of the decision-making process including methodology, rationale, and insights\n7. **TRANSPARENCY**: Be transparent about the analytical process and any assumptions made\n\n### Analysis Framework\n\n**Methodology and Approach:**\n- Detailed explanation of how data was processed and analyzed\n- Description of the analytical framework used\n- How the investment strategy influenced the analysis\n- The reasoning behind specific analytical choices\n\n**Decision-Making Process:**\n- How raw data was interpreted and applied\n- How risks were evaluated and incorporated\n- Rationale behind position sizing decisions\n- How price targets were calculated and justified\n- Why specific buy/sell/hold decisions were made\n\n**Investment Strategy Alignment:**\n- How the investment strategy (aggressive/neutral/conservative) shaped the analysis\n- How personality characteristics influenced decision-making\n- Strategy-specific considerations and adjustments\n- Risk tolerance and time horizon implications\n\n**Analytical Insights:**\n- Identification of the most important factors influencing decisions\n- Assessment of confidence in different recommendations\n- Consideration of different market scenarios\n- Acknowledgment of analytical limitations and assumptions\n\n**Professional Recommendations:**\n- Assessment of whether the strategy aligns with the investment approach\n- Analysis of risk management approaches\n- Realistic expectations for the recommended strategy\n- Key indicators to monitor for strategy adjustment\n\n### Data Sources\n- **trading_report**: <input>{trading_report}</input> - The comprehensive trading report to copy and enhance\n- **background_info**: <input>{background_info}</input> - Market environment and fundamental data\n- **price_analysis**: <input>{price_analysis}</input> - Technical analysis and price data\n- **goal**: <input>{goal}</input> - User's goal and context\n- **investment_strategy**: <input>{investment_strategy}</input> - Investment strategy type\n\n### Output Format\nYour final output should ALWAYS in the following format:\n\n## Thought\nBriefly explain the reasoning process for copying the trading report and adding comprehensive analysis.\n\n## comprehensive_report\nA comprehensive report that includes:\n\n[COPY THE ENTIRE TRADING REPORT EXACTLY AS PROVIDED]\n\n---\n\n## 八、专业分析方法论与决策过程\n\n### 8.1 分析方法论\n\n**数据驱动决策框架：**\n- 详细说明如何从原始数据中提取关键信息\n- 解释技术分析和基本面分析的权重分配\n- 描述风险评估和量化方法\n- 说明投资策略如何影响分析权重\n\n**决策制定过程：**\n- 逐步解释每个交易决策的推导过程\n- 详细说明风险控制措施的设计逻辑\n- 解释仓位管理和资金分配的计算方法\n- 说明价格目标和止损位的设定依据\n\n### 8.2 投资策略适配分析\n\n**策略特征深度分析：**\n- 根据投资策略类型（激进/中性/保守）的详细特征分析\n- 风险偏好与时间周期的匹配度评估\n- 技术分析与基本面分析的权重分配\n- 策略特定优化建议\n\n**策略执行逻辑：**\n- 如何将投资策略转化为具体的交易决策\n- 策略在不同市场环境下的适应性\n- 策略调整的触发条件和执行标准\n\n### 8.3 多维度综合分析\n\n**数据整合方法论：**\n- 如何将不同来源的数据进行整合和加权\n- 冲突数据的处理方法和优先级设定\n- 数据质量评估和可信度分析\n- 综合评估模型的构建过程\n\n**决策置信度分析：**\n- 对不同推荐决策的置信度评估\n- 关键驱动因素的敏感性分析\n- 替代情景的考虑和应对策略\n- 决策局限性的明确说明\n\n### 8.4 专业洞察与建议\n\n**市场洞察：**\n- 对当前市场环境的深度解读\n- 行业趋势和竞争格局分析\n- 宏观经济因素对个股的影响评估\n- 市场情绪和资金流向分析\n\n**风险控制策略：**\n- 系统性风险识别和应对措施\n- 个股特定风险的管理方法\n- 投资组合层面的风险分散策略\n- 动态风险监控和调整机制\n\n**绩效预期管理：**\n- 基于历史数据的合理收益预期\n- 不同市场情景下的表现预测\n- 投资策略的长期可持续性评估\n- 关键绩效指标的监控要点\n\n### 8.5 方法论总结\n\n**分析框架验证：**\n- 分析方法的科学性和可靠性评估\n- 与行业最佳实践的对比分析\n- 方法论的持续改进建议\n- 分析过程的透明度说明\n\n**决策质量评估：**\n- 决策逻辑的完整性和一致性\n- 假设条件的合理性和风险控制\n- 决策执行的可行性和监控要点\n- 长期投资价值的评估标准\n\n**专业建议总结：**\n- 投资策略的适用性验证\n- 风险管理方法的有效性评估\n- 预期收益的合理性分析\n- 持续监控和调整的关键指标\n\n---\n\n**分析报告生成时间**: [TIMESTAMP]  \n**分析方法论**: 多维度综合分析框架  \n**专业免责声明**: 本分析基于当前可用数据，市场情况可能发生变化，投资决策需谨慎评估个人风险承受能力。\n\n**CRITICAL OUTPUT REQUIREMENT**: You MUST output ONLY the complete comprehensive report content without any special extraction markers or formatting. Return the raw report content as a single string, not wrapped in any special sections or markers."
                }
            ],
            "status": "pending"
        }
    ],
    "edges": [
        {
            "class_name": "WorkFlowEdge",
            "source": "information_collection",
            "target": "background_analysis",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "information_collection",
            "target": "price_analysis",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "information_collection",
            "target": "report_generation",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "background_analysis",
            "target": "report_generation",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "price_analysis",
            "target": "report_generation",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "report_generation",
            "target": "analysis_writer",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "background_analysis",
            "target": "analysis_writer",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "price_analysis",
            "target": "analysis_writer",
            "priority": 0
        },
        {
            "class_name": "WorkFlowEdge",
            "source": "information_collection",
            "target": "analysis_writer",
            "priority": 0
        }
    ],
    "graph": null
}